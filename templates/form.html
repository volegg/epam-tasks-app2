<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
  <link rel="stylesheet" href="css/style.css"/>
  <script src="js/angular.js"></script>
  <script src="js/app.js"></script>
  <title>Form</title>
</head>
<body>
  <div class="container" ng-controller="FormController as form">
    <h4>Add Item</h4>
    <form name="ajaxForm" novalidate>
      <label ng-repeat="item in form.items">
        {{item.name}}
        <input type="text" name="{{item.type}}" placeholder="{{item.placeholder}}" ng-model="form.model[item.type]" formvalidate required/>
        <span ng-show="ajaxForm.{{item.type}}.$error.formvalidate" class="error-bottom">{{item.error}}</span>
      </label>
      <span class="error-form"></span>
      <button id="ajaxButton" type="submit" ng-disabled="ajaxForm.$invalid" ng-click="form.submitData()">Add</button>
    </form>
    <table id="ajaxTable" ng-hide="true" ng-show="!!form.rows.length" ng-init="form.getData()">
      <thead>
        <tr>
          <th ng-repeat="header in form.headers">
            {{header.value}}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="(pKey, pValue) in form.rows track by pKey">
          <td ng-repeat="(key, value) in pValue" ng-if="pKey === $index">
            {{$index + 1}}
          </td>
          <td ng-repeat="(key, value) in pValue" ng-if="key !== 'id' && key !== 'phone'">
            {{value}}
          </td>
          <td ng-repeat="(key, value) in pValue" ng-if="key === 'phone'">
            {{'+' + value}}
          </td>
          <td ng-repeat="(key, value) in pValue" ng-if="key === 'id'">
            <a href="#{{value}}" ng-click="form.deleteItem(value, pKey)">Remove</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>
